<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shengfa OS | å…¨çƒåŸ·è¡Œé•·æœ€é«˜æŒ‡æ®çµ‚ç«¯</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700;900&family=Share+Tech+Mono&display=swap');
        
        :root { --sf-gold: #c5a059; --sf-red: #8c1515; --sf-dark: #0a0c10; --sf-panel: rgba(22, 27, 34, 0.85); --sf-border: #30363d; --sf-text: #c9d1d9; }
        body { margin: 0; overflow: hidden; background: url('https://images.unsplash.com/photo-1451187580459-43490279c0fa?ixlib=rb-1.2.1&auto=format&fit=crop&w=1920&q=80') center/cover no-repeat; font-family: 'Noto Sans TC', sans-serif; color: var(--sf-text); height: 100vh; user-select: none; }
        
        /* æ¡Œé¢å€åŸŸ */
        .desktop { height: calc(100vh - 50px); position: relative; padding: 20px; box-sizing: border-box; display: flex; flex-direction: column; flex-wrap: wrap; gap: 20px; align-content: flex-start; }
        
        /* æ¡Œé¢åœ–ç¤º */
        .app-icon { width: 90px; height: 100px; display: flex; flex-direction: column; align-items: center; justify-content: center; cursor: pointer; border-radius: 8px; transition: 0.2s; text-align: center; }
        .app-icon:hover { background: rgba(255,255,255,0.1); border: 1px solid rgba(197,160,89,0.3); }
        .app-icon .icon-img { font-size: 2.5rem; margin-bottom: 8px; filter: drop-shadow(0 2px 5px rgba(0,0,0,0.8)); }
        .app-icon span { font-size: 0.85rem; font-weight: bold; text-shadow: 0 2px 4px #000; color: #fff; }
        
        /* åº•éƒ¨ä»»å‹™æ¬„ */
        .taskbar { height: 50px; background: rgba(10, 12, 16, 0.95); backdrop-filter: blur(10px); border-top: 1px solid var(--sf-border); position: absolute; bottom: 0; width: 100%; display: flex; justify-content: space-between; align-items: center; padding: 0 15px; box-sizing: border-box; z-index: 9999; }
        .start-btn { background: var(--sf-red); color: #fff; border: none; padding: 8px 15px; border-radius: 4px; font-weight: 900; font-size: 1rem; cursor: pointer; display: flex; align-items: center; gap: 10px; box-shadow: 0 0 10px rgba(140,21,21,0.5); }
        .taskbar-apps { display: flex; gap: 10px; flex: 1; margin-left: 20px; }
        .task-app { padding: 8px 15px; background: rgba(255,255,255,0.1); border-radius: 4px; border-bottom: 2px solid var(--sf-gold); font-size: 0.85rem; cursor: pointer; }
        .sys-tray { display: flex; align-items: center; gap: 15px; font-family: 'Share Tech Mono', monospace; font-size: 1rem; color: var(--sf-gold); }

        /* æ“¬çœŸå¯æ‹–æ›³è¦–çª— */
        .window { position: absolute; background: var(--sf-panel); backdrop-filter: blur(15px); border: 1px solid var(--sf-border); border-radius: 8px; box-shadow: 0 15px 50px rgba(0,0,0,0.8); display: none; flex-direction: column; overflow: hidden; min-width: 600px; min-height: 400px; z-index: 100; }
        .window-header { background: #010409; padding: 12px 15px; display: flex; justify-content: space-between; align-items: center; cursor: grab; border-bottom: 1px solid var(--sf-border); }
        .window-header:active { cursor: grabbing; }
        .window-title { font-weight: bold; font-size: 0.95rem; color: #fff; display: flex; align-items: center; gap: 8px; }
        .window-controls span { cursor: pointer; margin-left: 15px; font-size: 1.2rem; color: #888; transition: 0.2s; }
        .window-controls span:hover { color: #fff; }
        .window-controls .close:hover { color: var(--sf-red); }
        .window-body { padding: 20px; flex: 1; overflow-y: auto; }

        /* è¦–çª—å…§å®¹ UI */
        .dashboard-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; }
        .stat-card { background: rgba(0,0,0,0.5); border: 1px solid var(--sf-border); padding: 20px; border-radius: 6px; }
        .stat-num { font-family: 'Share Tech Mono', monospace; font-size: 2.2rem; color: var(--sf-gold); margin: 5px 0; }
        
        table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        th, td { padding: 12px; border-bottom: 1px solid var(--sf-border); text-align: left; font-size: 0.9rem; }
        th { color: #888; }
        .btn { padding: 6px 15px; border: none; border-radius: 4px; cursor: pointer; font-weight: bold; transition: 0.2s; }
        .btn-approve { background: #238636; color: white; }
        .btn-approve:hover { background: #2ea043; }
        .btn-reject { background: var(--sf-red); color: white; }

        /* Toast æç¤º */
        #toast { position: fixed; top: 20px; right: 20px; background: var(--sf-gold); color: #000; padding: 15px 25px; border-radius: 4px; font-weight: bold; font-size: 1rem; box-shadow: 0 5px 15px rgba(0,0,0,0.5); z-index: 10000; display: none; }
    </style>
</head>
<body onload="startTime()">

    <div id="toast">âœ… ç³»çµ±è¨Šæ¯</div>

    <div class="desktop">
        <div class="app-icon" ondblclick="openWindow('win-erp')">
            <div class="icon-img">ğŸ“Š</div>
            <span>å‹ç™¼ ERP æˆ°æƒ…</span>
        </div>
        <div class="app-icon" ondblclick="openWindow('win-bpm')">
            <div class="icon-img">âœ…</div>
            <span>å…¨çƒå…¬æ–‡ç°½æ ¸</span>
            <div style="background:red;color:white;border-radius:10px;padding:0 5px;font-size:0.7rem;position:absolute;top:5px;right:15px;" id="bpm-badge">3</div>
        </div>
        <div class="app-icon" ondblclick="openWindow('win-fleet')">
            <div class="icon-img">ğŸš</div>
            <span>è¼‰å…·èˆ‡è³‡ç”¢èª¿åº¦</span>
        </div>
        <div class="app-icon" ondblclick="openWindow('win-mail')">
            <div class="icon-img">âœ‰ï¸</div>
            <span>æœ€é«˜æ©Ÿå¯†éƒµä»¶</span>
        </div>
        <div class="app-icon" ondblclick="openWindow('win-terminal')">
            <div class="icon-img">ğŸ’»</div>
            <span>ç³»çµ±çµ‚ç«¯æ©Ÿ</span>
        </div>
    </div>

    <div class="window" id="win-erp" style="top: 50px; left: 100px; width: 800px; height: 500px;">
        <div class="window-header" onmousedown="dragWindow(event, 'win-erp')">
            <div class="window-title">ğŸ“Š Shengfa Global ERP - åŸ·è¡Œé•·æˆ°æƒ…å„€è¡¨æ¿</div>
            <div class="window-controls">
                <span onclick="closeWindow('win-erp')">_</span>
                <span class="close" onclick="closeWindow('win-erp')">âœ–</span>
            </div>
        </div>
        <div class="window-body">
            <h3 style="margin-top:0; color:#fff;">å…¨çƒç‡Ÿé‹å¯¦æ™‚ç›£æ§ (Q1 2026)</h3>
            <div class="dashboard-grid">
                <div class="stat-card">
                    <div style="color:#888;">é›†åœ˜ç¸½å¸‚å€¼ (NTD)</div>
                    <div class="stat-num">1,576,000,000,000,000</div>
                    <div style="color:#3fb950; font-size:0.8rem;">â–² è‚¡å¸‚ä»£è™Ÿ 7352 è¡¨ç¾å¼·å‹</div>
                </div>
                <div class="stat-card">
                    <div style="color:#888;">æœ¬æœˆå…¨çƒç‡Ÿæ”¶ (NTD)</div>
                    <div class="stat-num">236,000,000,000,000</div>
                    <div style="color:#3fb950; font-size:0.8rem;">æ·¨åˆ©ç‡ç¶­æŒ 49.2%</div>
                </div>
                <div class="stat-card">
                    <div style="color:#888;">å…¨çƒåœ¨è·å“¡å·¥ç¸½æ•¸</div>
                    <div class="stat-num">17,390,000</div>
                    <div style="color:var(--sf-gold); font-size:0.8rem;">äºæ´²ä½” 45%ï¼Œç¾æ´²ä½” 25%</div>
                </div>
                <div class="stat-card">
                    <div style="color:#888;">è¶…ç´šå» å€/æ¨ç´é‹ä½œç‹€æ…‹</div>
                    <div class="stat-num">742 / 742</div>
                    <div style="color:#3fb950; font-size:0.8rem;">â— å…¨çƒé€£ç·šæ­£å¸¸ (100% Uptime)</div>
                </div>
            </div>
        </div>
    </div>

    <div class="window" id="win-bpm" style="top: 100px; left: 150px; width: 850px; height: 550px;">
        <div class="window-header" onmousedown="dragWindow(event, 'win-bpm')">
            <div class="window-title">âœ… Shengfa BPM - åŸ·è¡Œé•·å°ˆå±¬ç°½æ ¸é€šé“</div>
            <div class="window-controls">
                <span onclick="closeWindow('win-bpm')">_</span>
                <span class="close" onclick="closeWindow('win-bpm')">âœ–</span>
            </div>
        </div>
        <div class="window-body">
            <table>
                <tr><th>å–®è™Ÿ</th><th>æ€¥é™</th><th>ææ¡ˆå–®ä½</th><th>ä¸»æ—¨æ‘˜è¦</th><th>ç°½æ ¸æ“ä½œ</th></tr>
                <tr id="doc-1">
                    <td>INV-001</td><td><span style="color:#ff7b72;">æ¥µæ€¥ä»¶</span></td><td>æ­æ´²ä½µè³¼éƒ¨</td>
                    <td style="color:#fff;"><strong>æ”¶è³¼å¾·åœ‹ç¬¬ä¸€å¤§è»Šç”¨æ™¶ç‰‡å» </strong><br><span style="color:#888; font-size:0.8rem;">ç¸½é ç®— 3.2 å…†å°å¹£ï¼Œå·²å®Œæˆç›¡è·èª¿æŸ¥ã€‚è«‹åŸ·è¡Œé•·è£ç¤ºã€‚</span></td>
                    <td><button class="btn btn-approve" onclick="approveDoc('doc-1', 'ä½µè³¼æ¡ˆå·²æ ¸å‡†ï¼3.2å…†è³‡é‡‘å·²ç”± FICO æ¨¡çµ„æ”¾è¡Œã€‚')">æ ¸å‡†</button></td>
                </tr>
                <tr id="doc-2">
                    <td>PR-992</td><td><span style="color:var(--sf-gold);">æ©Ÿå¯†</span></td><td>äºæ´²æŒ‡æ®éƒ¨</td>
                    <td style="color:#fff;"><strong>ç¬¬ä¸ƒä»£æ˜Ÿéš›é€šè¨Šé™£åˆ— æœ€çµ‚ç™¼å°„è¨±å¯</strong><br><span style="color:#888; font-size:0.8rem;">12 é¡†ä½è»Œé‡å­è¡›æ˜Ÿå·²å°±ç·’ï¼Œç­‰å¾…åŸ·è¡Œé•·ç™¼å°„æˆæ¬Šã€‚</span></td>
                    <td><button class="btn btn-approve" onclick="approveDoc('doc-2', 'ç™¼å°„æˆæ¬Šå·²ç¢ºèªï¼æ˜Ÿéš›é€šè¨Šé™£åˆ—é€²å…¥å€’æ•¸ç¨‹åºã€‚')">æˆæ¬Šç™¼å°„</button></td>
                </tr>
                <tr id="doc-3">
                    <td>HR-884</td><td>æ™®é€š</td><td>å…¨çƒäººè³‡é•·</td>
                    <td style="color:#fff;"><strong>æ¥µå…ƒç§‘å¤§ 2026 èè‹±ç›´å‡åå–®ç¢ºèª</strong><br><span style="color:#888; font-size:0.8rem;">ç”±ç‹å‰¯æ ¡é•·æå ±ä¹‹ 300 åå¤©æ‰å­¸ç”Ÿï¼Œæ“¬èµ·è–ª 1200 è¬éŒ„ç”¨ã€‚</span></td>
                    <td><button class="btn btn-approve" onclick="approveDoc('doc-3', 'äººäº‹æ¡ˆå·²æ ¸å‡†ï¼HR æ¨¡çµ„å·²ç™¼é€å…¨çƒéŒ„å–é€šçŸ¥ã€‚')">æ ¸å‡†</button></td>
                </tr>
            </table>
        </div>
    </div>

    <div class="window" id="win-fleet" style="top: 150px; left: 200px; width: 600px; height: 450px;">
        <div class="window-header" onmousedown="dragWindow(event, 'win-fleet')">
            <div class="window-title">ğŸš åŸ·è¡Œé•·å°ˆå±¬ - å…¨çƒè¼‰å…·èª¿åº¦ä¸­æ¨</div>
            <div class="window-controls">
                <span onclick="closeWindow('win-fleet')">_</span>
                <span class="close" onclick="closeWindow('win-fleet')">âœ–</span>
            </div>
        </div>
        <div class="window-body">
            <h3 style="color:var(--sf-gold); margin-top:0;">èª¿åº¦æŒ‡ä»¤ (Dispatch Command)</h3>
            <div style="background: rgba(0,0,0,0.5); padding: 20px; border-radius: 6px; border: 1px solid var(--sf-border);">
                <label style="display:block; margin-bottom:10px; font-weight:bold;">é¸æ“‡ç›®çš„åœ° / ä»»å‹™ï¼š</label>
                <select id="fleet-dest" style="width:100%; padding:10px; background:#010409; color:#fff; border:1px solid #333; margin-bottom: 20px;">
                    <option>æ¥µå…ƒç§‘å¤§ é ‚æ¨“åœæ©Ÿåª (è¦–å¯Ÿå­¸è¡“ä¸­æ¨)</option>
                    <option>å‹ç™¼ç¾æ´²æ¨ç´ (èˆªå¤ªé‹è¼¸ç¸½éƒ¨)</option>
                    <option>æ­æ´²æ ¸èèƒ½æºåŸºåœ°</option>
                </select>
                <label style="display:block; margin-bottom:10px; font-weight:bold;">è¼‰å…·ç´šåˆ¥ï¼š</label>
                <select id="fleet-type" style="width:100%; padding:10px; background:#010409; color:#fff; border:1px solid #333; margin-bottom: 20px;">
                    <option>SF-01 åŸ·è¡Œé•·å°ˆå±¬è¶…éŸ³é€Ÿç§äººå®¢æ©Ÿ</option>
                    <option>æ­¦è£è­·è¡›æˆ°è¡“ç›´å‡æ©Ÿç·¨éšŠ</option>
                </select>
                <button class="btn btn-approve" style="width:100%; padding:12px; font-size:1.1rem;" onclick="dispatchFleet()">ç¢ºèªç™¼é€èª¿åº¦æŒ‡ä»¤</button>
            </div>
        </div>
    </div>

    <div class="taskbar">
        <div style="display: flex; align-items: center;">
            <button class="start-btn" onclick="showToast('Shengfa OS ç³»çµ±é‹ä½œæ­£å¸¸ã€‚æ­¡è¿ï¼ŒåŸ·è¡Œé•·ã€‚')">
                <span>âš¡</span> SHENGFA
            </button>
            <div class="taskbar-apps" id="taskbar-apps">
                </div>
        </div>
        <div class="sys-tray">
            <span>ğŸ›¡ï¸ SYS: SECURE</span>
            <span id="os-clock">00:00:00</span>
        </div>
    </div>

    <script>
        // 1. æ™‚é–“ç³»çµ±
        function startTime() {
            const today = new Date();
            let h = today.getHours(); let m = today.getMinutes(); let s = today.getSeconds();
            m = m < 10 ? "0" + m : m; s = s < 10 ? "0" + s : s;
            document.getElementById('os-clock').innerHTML = h + ":" + m + ":" + s;
            setTimeout(startTime, 1000);
        }

        // 2. è¦–çª—ç®¡ç†ç³»çµ± (é–‹é—œèˆ‡å±¤ç´š)
        let zIndexCounter = 100;
        
        function openWindow(winId) {
            const win = document.getElementById(winId);
            win.style.display = 'flex';
            bringToFront(winId);
            updateTaskbar(winId, true);
        }

        function closeWindow(winId) {
            document.getElementById(winId).style.display = 'none';
            updateTaskbar(winId, false);
        }

        function bringToFront(winId) {
            zIndexCounter++;
            document.getElementById(winId).style.zIndex = zIndexCounter;
        }

        // é»æ“Šè¦–çª—æœ¬é«”æ™‚ä¹Ÿç§»åˆ°æœ€ä¸Šå±¤
        document.querySelectorAll('.window').forEach(win => {
            win.addEventListener('mousedown', function() {
                bringToFront(this.id);
            });
        });

        // 3. è¦–çª—æ‹–æ›³ç³»çµ± (Pro Max æ ¸å¿ƒæŠ€è¡“)
        let isDragging = false;
        let currentDragWindow = null;
        let offsetX = 0; let offsetY = 0;

        function dragWindow(e, winId) {
            isDragging = true;
            currentDragWindow = document.getElementById(winId);
            bringToFront(winId);
            // è¨ˆç®—æ»‘é¼ é»æ“Šä½ç½®èˆ‡è¦–çª—å·¦ä¸Šè§’çš„å·®å€¼
            const rect = currentDragWindow.getBoundingClientRect();
            offsetX = e.clientX - rect.left;
            offsetY = e.clientY - rect.top;
        }

        document.addEventListener('mousemove', (e) => {
            if (isDragging && currentDragWindow) {
                let newX = e.clientX - offsetX;
                let newY = e.clientY - offsetY;
                // é˜²æ­¢æ‹–å‡ºä¸Šæ–¹èˆ‡å·¦æ–¹é‚Šç•Œ
                if(newY < 0) newY = 0;
                if(newX < 0) newX = 0;
                currentDragWindow.style.left = newX + 'px';
                currentDragWindow.style.top = newY + 'px';
            }
        });

        document.addEventListener('mouseup', () => {
            isDragging = false;
            currentDragWindow = null;
        });

        // 4. æ¥­å‹™é‚è¼¯ç³»çµ±
        function approveDoc(rowId, successMsg) {
            document.getElementById(rowId).style.display = 'none';
            let badge = document.getElementById('bpm-badge');
            let count = parseInt(badge.innerText) - 1;
            badge.innerText = count;
            if(count === 0) badge.style.display = 'none';
            showToast(`âœ… æ•¸ä½ç°½ç« æˆæ¬ŠæˆåŠŸï¼\n${successMsg}`);
        }

        function dispatchFleet() {
            const dest = document.getElementById('fleet-dest').value;
            const type = document.getElementById('fleet-type').value;
            showToast(`ğŸš èª¿åº¦æŒ‡ä»¤å·²ç™¼é€è‡³è¯åˆä½œæˆ°ä¸­å¿ƒã€‚\nè¼‰å…·ï¼š${type}\nç›®çš„åœ°ï¼š${dest}\né è¨ˆæŠµé”æ™‚é–“ï¼š15 åˆ†é˜å¾Œã€‚`);
            closeWindow('win-fleet');
        }

        function showToast(msg) {
            const toast = document.getElementById('toast');
            toast.innerText = msg;
            toast.style.display = 'block';
            setTimeout(() => { toast.style.display = 'none'; }, 4000);
        }

        // ä»»å‹™æ¬„æ›´æ–° (è£é£¾ç”¨)
        function updateTaskbar(winId, isOpen) {
            const tb = document.getElementById('taskbar-apps');
            const titles = { 'win-erp':'ğŸ“Š ERPæˆ°æƒ…', 'win-bpm':'âœ… å…¬æ–‡ç°½æ ¸', 'win-fleet':'ğŸš è¼‰å…·èª¿åº¦', 'win-mail':'âœ‰ï¸ åŠ å¯†éƒµä»¶', 'win-terminal':'ğŸ’» çµ‚ç«¯æ©Ÿ' };
            if(isOpen && !document.getElementById('tb-'+winId)) {
                tb.innerHTML += `<div class="task-app" id="tb-${winId}" onclick="openWindow('${winId}')">${titles[winId]}</div>`;
            } else if (!isOpen && document.getElementById('tb-'+winId)) {
                document.getElementById('tb-'+winId).remove();
            }
        }
    </script>
</body>
</html>
